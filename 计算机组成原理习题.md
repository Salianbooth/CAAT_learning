# 计算机组成原理习题



# 简答题

## 1  冯诺依曼体系结构计算机特点，计算机系统的层次结构

​	冯诺依曼计算机结构主要由：中央处理器，存储器，输入设备，输出设备和总线

### 1. 冯诺依曼体系结构计算机特点

​	冯·诺依曼在研究 EDVAC 机时提出了"存储程序"的概念，"存储程序"的思想奠定了现代计算机的基本结构，以此概念为基础的各类计算机通称为冯·诺依曼机，其特点如下∶ 

1）采用"存储程序"的工作方式。 

2）计算机硬件系统由运算器、存储器、控制器、输入设备和输出设备5大部件组成。 

3）指令和数据以同等地位存储在存储器中，形式上没有区别，但计算机应能区分它们。

 4）指令和数据均用二进制代码表示。指令由操作码和地址码组成，操作码指出操作的类 型，地址码指出操作数的地址。 

​	"存储程序"的基本思想是;将事先编制好的程序和原始数据送入主存后才能执行，一旦程 序被启动执行，就无须操作人员的干预，计算机会自动逐条执行指令，直至程序执行结束。

### 2. 计算机系统层次结构

​	第1级是微程序机器层，这是一个实在的硬件层，它由机器硬件直接执行微指令。 

​	第2级是传统机器语言层，它也是一个实际的机器层，由微程序解释机器指令系统。 

​	第3级是操作系统层，它由操作系统程序实现。 操作系统程序是由机器指令和广义指令组成的，这些 广义指令是为了扩展机器功能而设置的，是由操作系 统定义和解释的软件指令，所以这一层也称混合层。 

​	第4级是汇编语言层，它为用户提供一种符号化的语言，借此可编写汇编语言源程序。这一层由汇编 程序支持和执行。 

​	第5级是高级语言层，它是面向用户的，是为方便用户编写应用程序而设置的。该层由各 种高级语言编译程序支持和执行。 

<img src="https://gitee.com/salianbooth/picture/raw/master/202406251443844.png" alt="Clip_2024-06-25_14-43-04" style="zoom:67%;" />







## 2  进位计数制及数据编码的方法和表示范围

### 1. 进位计数制

​	**进位计数制**（也称为**数制**）是表示数值的一种方法。常见的数制包括二进制、十进制、八进制和十六进制。每种数制都有一个基数或基准（即底数），它决定了数位上的可能值和进位规则。

#### 	常见数制

1. **二进制（Binary）**

   - **基数**：2
   - **数位**：0, 1
   - **示例**：1010210102 表示 1×23+0×22+1×21+0×20=8+2=10101×23+0×22+1×21+0×20=8+2=1010

2. **十进制（Decimal）**

   - **基数**：10
   - **数位**：0, 1, 2, 3, 4, 5, 6, 7, 8, 9
   - **示例**：1231012310 表示 1×102+2×101+3×100=100+20+3=123101×102+2×101+3×100=100+20+3=12310

3. **八进制（Octal）**

   - **基数**：8
   - **数位**：0, 1, 2, 3, 4, 5, 6, 7
   - **示例**：128128 表示 1×81+2×80=8+2=10101×81+2×80=8+2=1010

4. **十六进制（Hexadecimal）**

   - **基数**：16
   - **数位**：0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F（A表示10，B表示11，以此类推）
   - **示例**：𝐴316*A*316 表示 10×161+3×160=160+3=1631010×161+3×160=160+3=16310

   

   ### 2. 数据编码方法和表示范围

   #### 1. **原码**（Sign-and-Magnitude）

   - **表示方法**：用最高位表示符号位（0表示正数，1表示负数），其余位表示数值的绝对值。
   
   #### 2. **反码**（One's Complement）
   
   - **表示方法**：正数与原码相同，负数将原码取反。
   
   #### 3. **补码**（Two's Complement）

   - **表示方法**：正数与原码相同，负数将原码取反后加1。

   #### 4. **移码**（Excess-N）
   
   - **表示方法**：正数与原码相同，负数将原码加上一个偏移量（通常是2(𝑛−1)2(*n*−1)）。
   - **范围**：取决于具体的偏移量，常用于浮点数的指数部分。

![Clip_2024-07-01_11-09-57](https://gitee.com/salianbooth/picture/raw/master/202407011110065.png)



## 3  分层次的存储器体系结构



![Clip_2024-06-25_15-23-59](https://gitee.com/salianbooth/picture/raw/master/202406251524474.png)



## 4  cache的基本工作原理和局部性原理

味大，无需多言



## 5  指令操作码的编码

### 5.1指令格式

​	机器指令是用机器字来表示的。表示一条指令的机器字，就称为指令字，通常简称 指令。 指令格式，则是指令字用二进制代码表示的结构形式，通常由操作码字段和地址码字 段组成。操作码字段表征指令的操作特性与功能，而地址码字段通常指定参与操作的操作 数的地址。因此，一条指令的结构可用如下形式来表示：

![Clip_2024-06-27_17-09-30](https://gitee.com/salianbooth/picture/raw/master/202406271709154.png)

#### 5.1.1操作码

指令的操作码 OP 表示该指令应进行什么性质的操作，如进行加法、减法、乘法、除法、 取数、存数等。

**操作码有n位，就有2的n次方种操作**

#### 5.1.2地址码

根据一条指令中有几个操作数地址，可将该指令称为几操作数指令或几地址指令。

![Clip_2024-06-27_17-11-20](https://gitee.com/salianbooth/picture/raw/master/202406271712686.png)

**注意：**二地址指令常称为双操作数指令，它有两个地址码字段 A1 和 A2，

数学含义是：A1←(A1)OP(A2)

**二地址指令的分类**：

1. 是访问内存的指令格式，我们称这类指令为**存储器存储器(SS)型指令**。

2. 种是访问寄存器的指令格式，我们称这类指令为**寄存器寄存器(RR)型指令**。

3. 为**寄存器-存储器(RS)型指令**

   其中RR指令最快

#### 5.1.3指令字长度

​	指令字长度：一个指令字中包含二进制代码的位数，称为指令字长度。

​	机器字长：指计算机能直接处理的二进制数据的位数，它决定了计算机的运算精度。**机器字长通常与主存单元的位数一致**。

​	1. 指令字长度等于机器字长度的指令，称为单字长指令；

​	2.指令字长度等于半个机器 字长度的指令，称为半字长指令；

​	3.指令字长度等于两个机器字长度的指令，称为双字长指令。

## 6  寻址方式的概念及各寻址方式的主要优缺点和访存次数

![Clip_2024-06-27_17-42-10](https://gitee.com/salianbooth/picture/raw/master/202406271742057.png)

## 7  CPU的功能和组成（主要寄存器）

<img src="https://gitee.com/salianbooth/picture/raw/master/202406301504953.png" alt="Clip_2024-06-30_15-04-36" style="zoom: 67%;" />

<img src="https://gitee.com/salianbooth/picture/raw/master/202406301505346.png" alt="Clip_2024-06-30_15-04-59" style="zoom:67%;" />

### 数据通路

![Clip_2024-06-30_15-05-53](https://gitee.com/salianbooth/picture/raw/master/202406301506582.png)

![Clip_2024-06-30_15-06-28](https://gitee.com/salianbooth/picture/raw/master/202406301506725.png)

### 7.1CPU的功能

​	1.l指令控制（程序的顺序控制）

​	2.l操作控制（一条指令有若干操作信号实现）

​	3.l时间控制（指令各个操作实施时间的定时）

​	4.l数据加工（算术运算和逻辑运算）

### 7.2 CPU的组成

​	**中央处理器**CPU = **运算器 +** **cache** **+** **控制器**

#### 7.2.1 运算器

1. **ALU** 
2. **通用寄存器：R0～R3**
3. **暂存器：DR**
4. **状态字寄存器：PSW**

#### 7.2.2 Cache

​	**指令cache ：PC，IBUS**

​	**数据cache ：AR，DBUS**

#### 7.2.3控制器

​	由**程序计数器（PC）**、**指令寄存器（IR）**、指令译码器、时序产生器和操作控制器组成



### 7.3 CPU中的寄存器

l**指令寄存器**(IR)

l**程序计数器**(PC)

l**数据地址寄存器**(AR/MAR)

l**通用寄存器**(R0～R3)

l**状态字寄存器**(PSW/FLAG)



(1)**数据缓冲寄存器(DR)** 数据缓冲寄存器用来暂时存放 ALU 的运算结果，或由数据 存储器读出的一个数据字，或来自外部接口的一个数据字。缓冲寄存器的作用是： 

​		① 作为 ALU 运算结果和通用寄存器之间信息传送中时间上的缓冲； 

​		② 补偿 CPU 和内存、外围设备之间在操作速度上的差别。

(2)**指令寄存器(IR) **指令寄存器用来保存当前正在执行的一条指令。

(3)**程序计数器(PC) **为了保证程序能够连续地执行下去，CPU 必须具有某些手段来确 定下一条指令的地址。而程序计数器(PC)正是起到这种作用，所以它又称为指令计数器。

(4)**数据地址寄存器(AR)** 数据地址寄存器用来保存当前 CPU 所访问的数据存储器(简 称数存)单元的地址。

(5)**通用寄存器** 在我们的模型中，通用寄存器有 4 个(R0～R3)，其功能是：当算术逻 辑单元(ALU)执行算术或逻辑运算时，为 ALU 提供一个工作区。

(6)**程序状态字寄存器(PSWR) **程序状态字寄存器又称为状态条件寄存器，保存由算 术运算指令和逻辑运算指令运算或测试结果建立的各种条件代码，



## 8 微程序控制器原理



### 微程序控制计算机的基本工作原理

* 基本概念
  * 微指令
    * 在微程序控制的计算机中，将由同时发出的控制信号所执行的一组微操作
  * 微命令
    * 将指令分为若干条微指令，按次序执行这些微指令。组成微指令的操作即微命令
  * 微程序
    * 计算机的程序由指令序列构成，而计算机每条指令的功能均由微指令序列解释完成，这些微指令序列的集合就叫做微程序
  * 控制存储器
    * 微程序一般是存放在专门的存储器中的，由于该存储器主要存放控制命令（信号）与下一条执行的微指令地址（简称下址）
    * 存储单元内容
      * （1）微指令的控制信号——控制位
      * （2）下条微指令的地址——下址字段
    * 存储芯片：ROM
  * 执行一条指令实际上就是执行一段存放在控制存储器中的微程序
* 实现微程序控制的基本原理
  * 控制信号（23条）
  * 书上P123页为加法的过程
  * 微指令格式：控制字段+下址字段
  * 23个控制位，12个下址位——》容量为4K
  * 取址微指令的操作对所有指令都是相同的，所以是一条公用的微指令，其下址由操作码译码产生

![Clip_2024-06-30_15-07-47](https://gitee.com/salianbooth/picture/raw/master/202406301507881.png)

## 9 总线的概念，用途和对计算机性能的影响和分类

l**总线：构成计算机系统的互联机构，是系统内各功能部件之间进行信息传送的公共通路**。

1. 地址总线
   单向，三态总线，用于传送地址信息；
   其位数决定可直接寻址的范围
2. 数据总线
   双向，三态总线，用于传送数据信息 ；
   其位数有8位、16位、32位、64位等,数据线的宽度反映一次能传送的数据的位数；
3. 控制总线
   传送控制、状态信息；
   其类型决定计算机的特色；位数不定。

## 10 外围设备的信息交换方式及区别



1. **程序直接控制方式（最简单的I/O方式）**
   1. 无条件传送：对简单外设定时（同步）进行数据传送
   2. 条件传送：Polling (轮询，查询):  OS主动查询，也称为程序查询方式
2. **I/O设备（包括I/O接口）**将自己的状态放到一个状态寄存器中 OS阶段性地查询状态寄存器中的特定状态，以决定下一步动作.
   - I/O Interrupt (中断I/O方式): 几乎所有系统都支持的中断I/O方式,若一个I/O设备需要CPU干预，它就通过中断请求通知CPU
   - CPU中止当前程序的执行，调出OS（中断处理程序）来执行处理
   - 结束后，再返回到被中止的程序继续执行
   - OS是被动调出的，也称为中断驱动I/O方式
3. **Direct Memory Access (DMA方式)**: 磁盘等高速外设特有的I/O方式
   - 磁盘等高速外设成批地直接和主存进行数据交换
   - 需要专门的DMA控制器控制总线，完成数据传送
   - 当外设准备好数据后，向DMA控制器发DMA请求信号，DMA控制器再向CPU发总线请求，CPU让出总线后，由DMA控制器控制总线进行传输，无需CPU干涉



## 11 程序中断的处理过程

### 中断服务程序的流程

* (1) 保护现场
  * 程序断点的保护
  * 寄存器内容的保护
* (2) 中断服务
  * 对不同的 I/O 设备具有不同内容的设备服务
* (3) 恢复现场
  * 出栈指令
* (4) 中断返回
  * 中断返回指令

### 单重中断和多重中断

* 单重 中断

  * 不允许中断 现行的 中断服务程序

* 多重 中断

  * 允许级别更高 的中断源

  * 中断 现行的 中断服务程序

  * ### DMA 方式

    * 主存和 I/O 之间有一条直接数据通道
    * CPU 和 I/O 并行工作
    * DMA 的三种工作方式
      * (1) CPU暂停方式
      * (2) CPU周期窃取方式
      * (3)直接访问存储器
    * DMA 接口功能
      * (1) 向 CPU 申请 DMA 传送
      * (2) 处理总线 控制权的转交
      * (3) 管理 系统总线、控制 数据传送
      * (4) 确定 数据传送的 首地址和长度，修正 传送过程中的数据地址和长度
      * (5) DMA 传送结束时，给出操作完成信号
    * DMA 传送过程
      * 预处理、数据传送、后处理





## 12 I/O接口的功能和结构

![436b889440e7e6e7c44fce52d2291684](https://gitee.com/salianbooth/picture/raw/master/202407021514764.png)

### 设备控制器（I/O）的基本功能

* 实现主机和外部设备之间的数据传送
* 实现数据缓冲，以达到主机同外部设备之间的速度匹配
* 接受主机的命令，提供设备接口的设备，并按照主机的命令控制设备

### I/O 编址方式

* (1) 统一编址：用取数、存数指令
* (2) 不统一编址：有专门的 I/O 指令

### I/O 与主机的连接方式

* 辐射式连接
  * 每台设备都配有一套
  * 控制线路和一组信号线
  * 不便于增删设备
* 总线连接
  * 便于增删设备

### I/O设备

* 人机交互设备
  * 键盘、鼠标等
* 计算机信息的驻留设备
  * 硬盘、光盘等
* 机——机通信设备
  * MODEN等

### 为什么要设置接口？

* 1. 实现设备的选择

* 2. 实现数据缓冲达到速度匹配

* 3. 实现数据串     并格式转换

* 4. 实现电平转换

* 5. 传送控制命令

* 6. 反映设备的状态

    * （“忙”、“就绪”、“中断请求”）





# 计算题



## 1 补码的表示及加减法

![Clip_2024-06-28_11-48-16](https://gitee.com/salianbooth/picture/raw/master/202406281148136.png)

**注意点：1. 双符号位**

​			**2. 补码的减法，直接当成加法来看，[x–y]补=[x]补–[y]补=[x]补+[–y]补，直接全部取法再+1**



<img src="https://gitee.com/salianbooth/picture/raw/master/202406281149211.png" alt="Clip_2024-06-28_11-49-07" style="zoom: 67%;" />



<img src="https://gitee.com/salianbooth/picture/raw/master/202406281149941.png" alt="Clip_2024-06-28_11-49-19" style="zoom:67%;" />

## 2 浮点数的表示（范围）及加减运算

![Clip_2024-06-28_11-48-46](https://gitee.com/salianbooth/picture/raw/master/202406281148050.png)





<img src="https://gitee.com/salianbooth/picture/raw/master/202406281149497.png" alt="Clip_2024-06-28_11-49-49" style="zoom:67%;" />

![Clip_2024-06-28_11-49-56](https://gitee.com/salianbooth/picture/raw/master/202406281149780.png)

![Clip_2024-06-28_11-37-31](https://gitee.com/salianbooth/picture/raw/master/202406281137324.png)



![Clip_2024-06-28_11-37-41](https://gitee.com/salianbooth/picture/raw/master/202406281137922.png)



# 综合题

## 1 存储器容量扩充



<img src="https://gitee.com/salianbooth/picture/raw/master/202406261523643.png" alt="Clip_2024-06-26_15-23-31" style="zoom:50%;" />

字拓展

![Clip_2024-06-26_15-24-32](https://gitee.com/salianbooth/picture/raw/master/202406261524065.png)

位拓展

![Clip_2024-06-26_15-53-40](https://gitee.com/salianbooth/picture/raw/master/202406261553012.png)

### 做题步骤

1. 找出地址线和数据线

    地址线：就是4k这样的，都要转换成2的多少次方

   数据线：就是 多少位

2. 相除得到需要多少组和每组多少片

    就是地址大小相除，得到的是多少组

   数据位数相除，得到的是每组多少片

3. 画图

   其中地址线中要根据有多少组来进行片选，例如，16k X 8位的芯片，一共有4组，那么，地址线的高2位，就是A15,A14要用来连接一个 2-4选择器，来进行选择，其余的位数依次连接

   数据线就直接相连即可





## 2 数据通路及指令执行过程

​	CPU内数据通路——指令执行过程中，数据所经过的路径，包括路径中的部件。它是指令的执行部件，由操作元件和存储元件通过总线方式或分散方式连接而成的进行数据存储、处理、传送的路径.

​	就是这一条指令是怎末执行下来的一套流程

主要分为**取指令**和**执行指令**两个大部分

取指令周期：1. 取出指令   2. PC+1            <img src="https://gitee.com/salianbooth/picture/raw/master/202406261654579.png" alt="Clip_2024-06-26_16-54-20" style="zoom:50%;" />

 

### **单总线数据通路**

#### 四种基本操作的时序



<div style="display: flex; align-items: flex-start;">
  <div style="flex: 1; padding: 10px; white-space: pre-line;">
    <p>1.在寄存器之间传送数据
R0out，Yin
2.完成算术、逻辑运算
R1out，Yin
R2out，Add，Zin
Zout，R3in
3.从主存取字
R1out，MARin
Read, WMFC (等待MFC)
MDRout，R2in
4.写字到主存
R1out，MARin
R2out，MDRin，
Write, WMFC</p>
  </div>
  <div style="flex: 1; padding: 10px;">
    <img src="https://gitee.com/salianbooth/picture/raw/master/202406261657315.png" alt="image-20240626165714269" style="zoom:50%;" />
  </div>
</div>


<img src="https://gitee.com/salianbooth/picture/raw/master/202406272003674.png" alt="Clip_2024-06-27_20-03-02" style="zoom:67%;" />

基本是根据这个图来画出流程图和微程序指令

**下面是加法和减法的指令执行过程**

<img src="https://gitee.com/salianbooth/picture/raw/master/202406272005350.png" alt="Clip_2024-06-27_20-04-59" style="zoom: 67%;" />





## 3 寻址方式综合题

![Clip_2024-06-30_10-29-46](https://gitee.com/salianbooth/picture/raw/master/202406301029593.png)

![Clip_2024-06-30_10-29-55](https://gitee.com/salianbooth/picture/raw/master/202406301029610.png)



## 4 Cache地址映射

**13.一个组相联 cache 由 64 个行组成，每组 4 行。主存储器包含 4K 个块，每块 128 字。请表示内存 地址的格式。**

**15.假设主存容量 16M×32 位，cache 容量 64K×32 位，主存与 cache 之间以每块 4×32 位大小传送 数据，请确定直接映射方式的有关参数，并画出主存地址格式。**
